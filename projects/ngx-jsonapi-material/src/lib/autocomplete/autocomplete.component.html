<mat-form-field style="width: 100%" appearance="outline">
    <input matInput aria-label="Escribe algo que buscar" name="autocomplete-resource"
        placeholder="Escribe algo que buscar"
        type="text"
        [matAutocomplete]="auto"
        [formControl]="autocompleteCtrl"
        (blur)="closeAutocomplete()"
        id="autocompleteResource"
        #autocompleteResource>
    <mat-autocomplete #auto="matAutocomplete"
    [displayWith]="displayFn"
    (optionSelected)="selectedResource($event.option.value)">
    <div *ngFor="let resource of filtered_resource | async; trackBy: trackByFn" >
        <mat-option [value]="resource" *ngIf="showList">
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="4px">
                <mat-icon>{{ icon }}</mat-icon>
                <strong
                    [innerHTML]="resource.attributes[displayAttributes[0]]"
                ></strong>
                <ng-container *ngFor="let attribute of displayAttributes; let item = index">
                    <small *ngIf="item >= 1"> | {{ resource.attributes[attribute] }}</small>
                </ng-container>
            </div>
        </mat-option>
    </div>
</mat-autocomplete>

<button mat-icon-button class="mat-button" matSuffix matTooltip="Actualizar lista"
    [disabled]="collection?.is_loading" (click)="refresh()">
    <mat-icon class="toast-shortcuts">refresh</mat-icon>
</button>
</mat-form-field>

<mat-progress-bar class="progress-bar-autocomplete"
    *ngIf="collection?.is_loading"
    color="accent"
    mode="indeterminate"
></mat-progress-bar>
<small *ngIf="collection?.is_loading">
    <span>Cargando recursos</span>
    <span [innerHTML]="resourceArray.length > 0 ? '(' + resourceArray.length + ')...' : ''"></span>
</small>
